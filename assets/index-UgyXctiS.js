import{b as y,c as I,e as x}from"./localStorage-B3WGF9uy.js";import{R as b}from"./render-CIcQSh-L.js";function T(e){const t=document.createElement("div");t.classList.add("card");const s=document.createElement("div");s.classList.add("lvl");const n=document.createElement("span");n.id="titleNameText";const c=document.createElement("input");return c.id="titleNameInput",c.placeholder=e.title,n.textContent=e.title,n.addEventListener("click",()=>{n.style.display="none",c.style.display="inline-block",c.value=n.textContent,c.focus()}),c.addEventListener("blur",()=>{const i=c.value.trim();if(i){n.textContent=i;const r=y(),L=localStorage.getItem("currentProjectId"),o=r.find(p=>p.id===L);if(!o||!o.lists)return;const u=o.lists.find(p=>p.id===e.id);u&&(u.title=i,saveProject(r))}n.style.display="inline-block",c.style.display="none"}),c.addEventListener("keydown",i=>{i.key==="Enter"&&c.blur()}),t.append(s,n,c),t}function h(e,t){const s=document.createElement("div");s.classList.add("listCardWrapper");const n=document.createElement("div");n.classList.add("cardHeader");const c=document.createElement("div");c.classList.add("menuWrapper");const i=document.createElement("button");i.classList.add("openMenu");const r=document.createElement("div");r.classList.add("dropMenu","hidden");const L=document.createElement("img"),o=document.createElement("button");o.classList.add("delite");const u=document.createElement("button");u.classList.add("addTask");const p=document.createElement("div");p.classList.add("cardList");const a=document.createElement("span");a.id="chapterNameText";const d=document.createElement("input");d.id="chapterNameInput";const k=document.createElement("span");return d.placeholder=e.title||"List title",a.textContent=e.title||"List title",L.src="/public/Минималистичная иконка мусорного ведра.png",o.textContent="Удалить",u.textContent="Добавить задачу",k.textContent="+",i.textContent="•••",a.addEventListener("click",()=>{a.style.display="none",d.style.display="inline-block",d.value=a.textContent,d.focus()}),d.addEventListener("blur",()=>{const l=d.value.trim();if(l){a.textContent=l;const m=y(),S=localStorage.getItem("currentProjectId"),v=m.find(g=>g.id===S);if(!v||!v.lists)return;const C=v.lists.find(g=>g.id===e.id);C&&(C.title=l,I(m))}a.style.display="inline-block",d.style.display="none"}),d.addEventListener("keydown",l=>{l.key==="Enter"&&d.blur()}),i.addEventListener("click",l=>{r.classList.toggle("hidden"),document.querySelectorAll(".dropMenu").forEach(m=>{m!==r&&m.classList.add("hidden")})}),o.addEventListener("click",l=>{l.stopPropagation(),confirm(`Вы уверены, что хотите удалить раздел '${e.title}'?`)&&t(e.id)}),o.prepend(L),r.append(o),c.append(i,r),n.append(a,d,c),u.prepend(k),s.append(n,p,u),s}const E=document.querySelector(".createNewSection"),f=document.getElementById("lists"),P=document.querySelector(".allLIsts"),w={ListTitle:"List title"};E.addEventListener("click",()=>{const e={id:Date.now().toString(),title:w.ListTitle,section:[]},t=y(),s=localStorage.getItem("currentProjectId"),n=t.find(i=>i.id===s);if(!n){alert("Проект не найден");return}n.lists||(n.lists=[]),n.lists.push(e),I(t);const c=h(e,i=>{x(i),j()});f.insertBefore(c,E)});function j(){const e=localStorage.getItem("currentProjectId"),t=y().find(s=>s.id===e);if(!t){document.getElementById("app").innerHTML="Проект не найден";return}if(projectName&&(projectName.textContent=t.name),f.innerHTML="",f.append(E),t.lists&&t.lists.length>0){const s=document.createDocumentFragment();b(t.lists,s,n=>h(n,c=>{x(c),j()})),f.insertBefore(s,E)}}j();P.addEventListener("click",e=>{document.querySelectorAll(".dropMenu").forEach(t=>{!t.contains(e.target)&&!e.target.classList.contains("openMenu")&&t.classList.add("hidden")})});const M={title:"Gafar"};document.querySelectorAll(".addTask").forEach((e,t)=>{e.addEventListener("click",()=>{const s=document.querySelectorAll(".cardList")[t];b(M,s,T)})});
